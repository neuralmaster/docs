<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://www.neuralmaster.org/panels/inpaint_settings_panel/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>(NEW) Inpait Settings panel - Neural Master</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "(NEW) Inpait Settings panel";
        var mkdocs_page_input_path = "panels\\inpaint_settings_panel.md";
        var mkdocs_page_url = "/panels/inpaint_settings_panel/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
          <a href="../..">
          <img src="../../img/nm_logo_top.png" class="logo" alt="Logo"/>
        </a>
      <div class="wy-side-nav-search"><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>


      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../get_started/">Get started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../how_to_install_sd/">How to install SD</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../nm_inpainter/">SD extention</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../changelog/">Changelog</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../basics/">Basics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../common_pipeline/">Common pipeline</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../support/">Support</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">UI</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../ui_basics/">UI Basics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../create_session_panel/">Create session panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../open_session_panel/">Open session panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../camera_panel/">Camera control panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_control_panel/">Main control panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../render_settings_panel/">Render settings panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sd_connection_panel/">SD connection panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sd_settings_panel/">(NEW) SD settings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sd_controlnet_panel/">SD ControlNet panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../layers_panel/">Texture layers panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../player_panel/">Player panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../debug_panel/">Debug panel</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">(NEW) Inpait Settings panel</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#automatic-inpainting-mask">Automatic inpainting mask</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#settings">Settings</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mode">Mode</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#add-frame">Add Frame</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#smooth-mask">Smooth Mask</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#black-white-only">Black &amp; White Only</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inpaint_tools_panel/">(NEW) Inpaint Tools panel</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../image_selector/">Image settings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../addon_settings_page/">Addon preferences</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../integrated_products/">Integrated products</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contacts/">Contacts</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Neural Master</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">UI</li>
      <li class="breadcrumb-item active">(NEW) Inpait Settings panel</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="inpaint-settings-panel">Inpaint Settings Panel</h1>
<p>This panel is displayed in the Image Editor area and contains settings for inpainting.</p>
<p>At the moment the panel contains only settings of the automatic inpainting mask.</p>
<h2 id="automatic-inpainting-mask">Automatic inpainting mask</h2>
<p><strong>NeuroMaster</strong> is capable to autocreate an inpainting mask based on 'Normals Angle' map, which is generated during the creation of each texture layer.</p>
<p>The example of such automatic impaint mask is shown on the image bellow.</p>
<p><img alt="Inpainting Settings Panel" src="../../img/automask_example.png" /></p>
<p>During inpainting, it's usually necessary to redraw the areas that were significantly stretched and distorted in the creation of previous frames, but not inpainting areas that will be stretched in the position of the current camera.</p>
<p><strong>Autogenerate mask</strong> uses 'Normals Angle' masks to create such an inpainting mask.</p>
<p>'Normals Angle' is a simple 1-channels mask that is an inverted dot between normals and camera view vector (it is not the same that 3-channels Normal Map, that used by Neural master as an input for ControlNet).
Mask looks similar Fresnel mask, but they have mode smoothed borders that is important for the used task. 
The mask is also baked when creation a new Fusion layer as a combination of all the source layers.
That's why at every moment it's possible to understand the value of stretching of every pixel of the texture.  </p>
<p>There are two <strong>Autogenerate mask</strong> modes available.</p>
<ul>
<li>
<p><strong>Balanced</strong> mode find the boundary of inpainting mask as the line where the 'Normals Angle' values of the current texture layer and previous layers equal.
This boundary can be shifted by using the <strong>Balance</strong> parameter, which by default is set to 1.
Increasing this parameter will expand the inpainting area, while decreasing it will reduce the area.  </p>
</li>
<li>
<p>(NEW) <strong>Current camera only</strong> mode uses the 'Normals Angle' map of the current texture layer only.<br />
The parameter <strong>Threshold</strong> is used to determine the maximum value of the 'Normals Angle' map, which will be inside the inpainting mask.
Increasing this parameter will expand the inpainting area, while decreasing it will reduce the area.</p>
</li>
</ul>
<p>Also, some additional features are used:  </p>
<ul>
<li>Add a frame on the perimeter of the image. In some cases it also can improve the inpainting quality because SD uses more information for inpainting.</li>
<li>Smooth the border of inpainting mask, that is required to improve the inpainting quality, especially in the case of using the <strong>Neural Master Inpainter</strong>.</li>
<li>Convert the mask to black and white only.</li>
</ul>
<p>All of these features can be disabled. </p>
<p>Automask is generated automatically when creation of new shot layer and also can be launched manually from <a href="../inpaint_tools_panel/">Inpaint Tools panel</a>.  <br />
In the both cases is used the settings from this panel.</p>
<h2 id="settings">Settings</h2>
<p><img alt="Inpainting Settings Panel" src="../../img/inpaint_settings_panel.png" /></p>
<h3 id="mode">Mode</h3>
<ul>
<li>
<p><strong>Balance (1.00 default)</strong> is used for <strong>Balanced</strong> mode only and adjusts the balance for the inpainting mask's boundary that is described above.
Increase this value to expand the inpainting area, or decrease it to reduce the area.</p>
</li>
<li>
<p><strong>THreshold (0.25 default)</strong>: is used for <strong>Current camera only</strong> mode and give teh threshold valued of 'Normals Angle' mask of the current texture layer that is described above.
Increase this value to expand the inpainting area, or decrease it to reduce the area.</p>
</li>
</ul>
<h3 id="add-frame">Add Frame</h3>
<ul>
<li><strong>Add Frame</strong>: When checked, this option adds a border around the image to potentially enhance the quality of inpainting.</li>
<li><strong>Width</strong>: This numerical field determines the width of the frame in pixels.</li>
</ul>
<h3 id="smooth-mask">Smooth Mask</h3>
<ul>
<li><strong>Smooth Mask</strong>: Activating this option smoothens the borders of the inpainting mask.</li>
<li><strong>Blur Width</strong>: Defines the width of the blur applied to smooth the mask edges.</li>
</ul>
<h3 id="black-white-only">Black &amp; White Only</h3>
<ul>
<li><strong>B/W only</strong>: This checkbox, when ticked, ensures that the inpainting mask is generated in black and white only, as opposed to grayscale.</li>
<li><strong>Threshol (0.50 default)</strong>: This field sets the threshold level for the black and white mask. Values closer to 1.00 result in more white areas, whereas values closer to 0.00 result in more black areas.</li>
</ul>
<h3 id="notes">Notes</h3>
<ol>
<li>If the both options <strong>Smooth</strong> and <strong>Black &amp; White Only</strong> are enabled, then the mask is first smoothed and then converted to black and white.</li>
<li>If a frame and smoothing are used at the same time, then the width of the frame must be at least larger than the width of the smoothing in order for it to be visible in the picture.</li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../debug_panel/" class="btn btn-neutral float-left" title="Debug panel"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../inpaint_tools_panel/" class="btn btn-neutral float-right" title="(NEW) Inpaint Tools panel">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../debug_panel/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../inpaint_tools_panel/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
